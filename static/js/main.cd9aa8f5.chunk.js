(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(t,e,n){"use strict";var o=n(4),r=function(t){return{type:"SET_TOKEN",payload:{token:t}}},i=function(t){return{type:"SET_HOST",payload:{host:t}}},c=function(){return{type:"CLEAR_CREDENTIALS"}},a=function(t){return{type:"SET_ONLINE",payload:{online:t}}},u=function(t){return{type:"SET_STARTED",payload:{started:t}}},s={token:"",host:"",online:!1,started:!1},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TOKEN":return Object(o.a)({},t,{token:e.payload.token});case"SET_HOST":return Object(o.a)({},t,{host:e.payload.host});case"SET_ONLINE":return Object(o.a)({},t,{online:e.payload.online});case"SET_STARTED":return Object(o.a)({},t,{started:e.payload.started});case"CLEAR_CREDENTIALS":return s;default:return t}},l="credentials",f=function(t){return t[l].token},m=function(t){return t[l].host},b=function(t){return t[l].online},h=function(t){return t[l].started};n.d(e,"j",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"a",function(){return c}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"k",function(){return l}),n.d(e,"d",function(){return f}),n.d(e,"c",function(){return m}),n.d(e,"e",function(){return b}),n.d(e,"f",function(){return h});e.b=d},2:function(t,e,n){"use strict";var o=n(46),r=n(4),i=function(t,e){return{type:"ADD_MESSAGE",payload:{emitter:t,content:e,format:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",date:Date.now()}}},c=function(){return{type:"CLEAR_MESSAGES"}},a={messages:[]},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_MESSAGE":return Object(r.a)({},t,{messages:[].concat(Object(o.a)(t.messages),[e.payload])});case"CLEAR_MESSAGES":return a;default:return t}},s="discussion",d=function(t){return t[s].messages};n.d(e,"a",function(){return i}),n.d(e,"b",function(){return c}),n.d(e,"e",function(){return s}),n.d(e,"d",function(){return d});e.c=u},20:function(t,e,n){"use strict";var o=n(4),r=n(6),i=n(45),c=n.n(i),a=n(1),u=n(2),s=null,d=null,l=null,f={name:"Assistant OS"},m=function(t,e,n,o){return"text"===t&&e.toLowerCase()===n&&(!o||l||l.id===o)},b=function(t){window.Notification&&"granted"===Notification.permission&&new Notification(f.name,{body:t})},h=function(t){return{type:"SET_MEMORY",payload:{memory:t}}},O=function(t,e,n){return s&&s.emit("data",{type:t,token:e,payload:n})},p=function(t,e){return function(n,o){var r=o(),i=Object(a.d)(r);n(Object(u.a)("me",e,t));m(t,e,"exit")||m(t,e,"quit")?n(Object(a.i)(!1)):m(t,e,"reset")?setTimeout(function(){n(Object(u.a)("other","Do you really want to clear my memory?","text")),l={id:"confirmClear"}},1500):m(t,e,"clear")?n(Object(u.b)()):m(t,e,"yes","confirmReset")?setTimeout(function(){n(Object(u.a)("other","Ok. Clearing memory.","text")),setTimeout(function(){n(Object(u.b)()),n(Object(a.a)()),setTimeout(function(){n(y())},1e3)},2e3)},1500):m(t,e,"notification")?b("Hello !"):m(t,e,"no","confirmReset")?l=null:Object(a.e)(r)?s&&O("message",i,{content:e,format:t}):setTimeout(function(){Object(a.c)(r)?i?n(y()):e.match(/[A-Za-z0-9]+/)?(n(Object(a.j)(e)),n(Object(u.a)("other","Ok thank you. I try to establish the connection.","text")),l={id:"try-connection"},n(y())):n(Object(u.a)("other","Please provide a valid token.")):e.match(/http(s|):\/\/[A-Za-z0-9.\-_:\/]+/)?(n(Object(a.g)(e)),n(y())):n(Object(u.a)("other","Please provide a valid url."))},1500)}},y=function(){return function(t,e){var n,o,r=e();Object(a.c)(r)?Object(a.d)(r)?t((n=Object(a.c)(r),o=Object(a.d)(r),function(t){s&&s.disconnect(),(s=c()(n)).on("connect",function(){O("register",o,{label:"Web App",priority:3,type:"adapter"}),d=setTimeout(function(){t(Object(u.a)("other","Connection impossible","text")),clearTimeout(d)},5e3)}),s.on("disconnect",function(){console.log("disconnection"),t(Object(a.h)(!1))}),s.on("data",function(e){var n=e.type,o=e.payload;if("registered"===n){clearTimeout(d),t(Object(a.h)(!0)),l&&"try-connection"===l.id&&t(Object(u.a)("other","Connection established","text")),f.name=o.name;var r=window.Notification&&"granted"===Notification.permission;Notification.requestPermission(function(t){Notification.permission!==t&&(Notification.permission=t),b(r?"".concat(f.name," ready to help you!"):"Notifications are now authorized.")})}else"answer-answer"===n&&(t(Object(u.a)("other",o.content,o.format)),t(h(o.memory)),"hidden"===document.visibilityState&&"text"===o.format&&b(o.content))})})):t(Object(u.a)("other","Please provide me the token of the assistant.","text")):t(Object(u.a)("other","Please provide me the url of a virtual assistant to connect to.","text"))}},v=function(t,e){return function(n,o){O("set-value",Object(a.d)(o()),{id:t,value:e}),n(h(Object(r.a)({},t,e)))}},E={memory:{}},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_MEMORY":return Object(o.a)({},t,{memory:Object(o.a)({},t.memory,e.payload.memory)});default:return t}},w=function(t,e){return t.os.memory[e]};n.d(e,"c",function(){return p}),n.d(e,"e",function(){return y}),n.d(e,"d",function(){return v}),n.d(e,"f",function(){return"os"}),n.d(e,"b",function(){return w});e.a=j},47:function(t,e,n){t.exports=n(87)},83:function(t,e){},86:function(t,e,n){},87:function(t,e,n){"use strict";n.r(e);var o,r=n(0),i=n.n(r),c=n(27),a=n.n(c),u=n(25),s=n(41),d=n(42),l=n.n(d),f=n(6),m=n(3),b=n(43),h=n(24),O=n(44),p=n.n(O),y=n(1),v=n(2),E=n(20),j={key:"root",storage:p.a},w=Object(m.c)((o={},Object(f.a)(o,y.k,y.b),Object(f.a)(o,v.e,v.c),Object(f.a)(o,E.f,E.a),o)),g=Object(h.a)(j,w),S="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):m.d,T=(n(86),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function _(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}var k=function(){var t=Object(m.e)(g,S(Object(m.a)(b.a)));return{store:t,persistor:Object(h.b)(t)}}(),A=k.store,N=k.persistor,R=l()({loader:function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,131))},loading:function(){return i.a.createElement("div",null)}});a.a.render(i.a.createElement(u.a,{store:A},i.a.createElement(s.a,{loading:null,persistor:N},i.a.createElement(R,null))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");T?(function(t,e){fetch(t).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):_(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):_(e,t)})}}()}},[[47,1,2]]]);
//# sourceMappingURL=main.cd9aa8f5.chunk.js.map